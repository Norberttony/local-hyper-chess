{"version":3,"file":"extras-widget.js","sourceRoot":"","sources":["../../../graphics/widgets/extras-widget.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,mBAAmB,EAAkB,MAAM,mBAAmB,CAAC;AAErF,4CAA4C;AAE5C,MAAM,OAAO,YAAa,SAAQ,WAAW;IACjC,OAAO,CAAsB;IAC7B,OAAO,CAAmB;IAC1B,SAAS,CAAc;IACvB,SAAS,CAAc;IAE/B,YAAY,QAAuB,EAAE,WAA2B,QAAQ;QACpE,KAAK,CAAC,QAAQ,CAAC,CAAC;QAEhB,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChD,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;QAClD,SAAS,CAAC,SAAS,GAAG;;;;iHAImF,CAAC;QAC1G,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAE7D,MAAM,OAAO,GAAG,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAwB,CAAC;QACrF,MAAM,OAAO,GAAG,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAqB,CAAC;QAElF,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC,SAAS,EAAE,wBAAwB,CAAgB,CAAC;QACzF,IAAI,CAAC,SAAS,GAAG,mBAAmB,CAAC,SAAS,EAAE,wBAAwB,CAAgB,CAAC;QAEzF,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,mBAAmB;QACnB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAG,EAAE;YAC1B,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC,CAAA;QACD,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAG,EAAE;YAC1B,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC,CAAA;QAED,iCAAiC;QACjC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;QACnF,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,eAAe,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;QAChF,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,GAAG,EAAE;YAC/C,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,aAAa,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACP,CAAC;IAEe,MAAM;QAClB,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;IAC/C,CAAC;IAEe,OAAO;QACnB,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QAChD,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;IACpD,CAAC;IAEO,aAAa;QACjB,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;IAChD,CAAC;IAEO,aAAa;QACjB,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IAC1D,CAAC;CACJ","sourcesContent":["import { BoardGraphics } from \"../board-graphics.js\";\nimport { BoardWidget, getFirstElemOfClass, WidgetLocation } from \"./board-widget.js\";\n\n// Allows user to copy or set the FEN or PGN\n\nexport class ExtrasWidget extends BoardWidget {\n    private pgnText: HTMLTextAreaElement;\n    private fenText: HTMLInputElement;\n    private pgnButton: HTMLElement;\n    private fenButton: HTMLElement;\n\n    constructor(boardgfx: BoardGraphics, location: WidgetLocation = \"Bottom\"){\n        super(boardgfx);\n\n        const container = document.createElement(\"div\");\n        container.classList.add(\"board-graphics__extras\");\n        container.innerHTML = `\n            <textarea class = \"extras__pgn\" onfocus = \"this.select();\" spellcheck = \"false\"></textarea>\n            <button class = \"extras__set-pgn-button\" onclick = \"setPGN();\">Set PGN</button>\n            <input class = \"extras__fen\" onfocus = \"this.select();\">\n            <button class = \"extras__set-fen-button\" onclick = \"setFEN();\" spellcheck = \"false\">Set FEN</button>`;\n        boardgfx.getWidgetContainer(location).appendChild(container);\n\n        const pgnText = getFirstElemOfClass(container, \"extras__pgn\") as HTMLTextAreaElement;\n        const fenText = getFirstElemOfClass(container, \"extras__fen\") as HTMLInputElement;\n\n        this.boardgfx = boardgfx;\n        this.pgnText = pgnText;\n        this.fenText = fenText;\n        this.pgnButton = getFirstElemOfClass(container, \"extras__set-pgn-button\") as HTMLElement;\n        this.fenButton = getFirstElemOfClass(container, \"extras__set-fen-button\") as HTMLElement;\n\n        this.updateFENText();\n        this.updatePGNText();\n\n        // clicking buttons\n        this.pgnButton.onclick = () => {\n            boardgfx.loadPGN(pgnText.value);\n        }\n        this.fenButton.onclick = () => {\n            boardgfx.loadFEN(fenText.value);\n        }\n\n        // listening to game state events\n        boardgfx.skeleton.addEventListener(\"variation-change\", () => this.updateFENText());\n        boardgfx.skeleton.addEventListener(\"new-variation\", () => this.updatePGNText());\n        boardgfx.skeleton.addEventListener(\"loadFEN\", () => {\n            this.updateFENText();\n            this.updatePGNText();\n        });\n    }\n\n    public override enable(): void {\n        this.pgnButton.removeAttribute(\"disabled\");\n        this.fenButton.removeAttribute(\"disabled\");\n    }\n\n    public override disable(): void {\n        this.pgnButton.setAttribute(\"disabled\", \"true\");\n        this.fenButton.setAttribute(\"disabled\", \"true\");\n    }\n\n    private updateFENText(): void {\n        this.fenText.value = this.boardgfx.getFEN();\n    }\n\n    private updatePGNText(): void {\n        this.pgnText.value = this.boardgfx.pgnData.toString();\n    }\n}\n"]}