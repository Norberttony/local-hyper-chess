{"version":3,"file":"piece.js","sourceRoot":"","sources":["../../game/piece.ts"],"names":[],"mappings":"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","sourcesContent":["// Contains helper functions for pieces, such as their numerical representations\n// FEN to piece conversions are also stored here.\n\nexport enum Side {\n    None = 0,\n    White = 8,\n    Black = 16\n};\n\nexport enum PieceType {\n    None,\n    King,\n    Retractor,\n    Chameleon,\n    Springer,\n    Coordinator,\n    Straddler,\n    Immobilizer\n};\n\n// to-do: explore type branding to ensure better type safety\nexport type Piece = Side | PieceType;\n\nconst pieceSideMask = 0b11000;\nconst pieceTypeMask = 0b00111;\n\nexport function getPieceType(p: Piece): PieceType {\n    return p & pieceTypeMask;\n}\n\nexport function getPieceSide(p: Piece): Side {\n    return p & pieceSideMask;\n}\n\nexport function setPieceType(p: Piece | Side, t: PieceType): Piece {\n    return getPieceSide(p) | t;\n}\n\nexport function isPieceOfType(p: Piece, o: PieceType): boolean {\n    return getPieceType(p) == o;\n}\n\nexport function isPieceOfSide(p: Piece, o: Side): boolean {\n    return getPieceSide(p) == o;\n}\n\nexport function arePiecesSameSide(p1: Piece, p2: Piece): boolean {\n    return getPieceSide(p1) == getPieceSide(p2);\n}\n\nexport function arePiecesSameType(p1: Piece, p2: Piece): boolean {\n    return getPieceType(p1) == getPieceType(p2);\n}\n\nexport const PieceStrings: readonly string[] = [ \"?\", \"K\", \"Q\", \"B\", \"N\", \"R\", \"P\", \"U\" ];\n\nconst FENCharToPiece: { [fen: string]: Piece } = {\n    k: Side.Black | PieceType.King,\n    q: Side.Black | PieceType.Retractor,\n    b: Side.Black | PieceType.Chameleon,\n    n: Side.Black | PieceType.Springer,\n    r: Side.Black | PieceType.Coordinator,\n    p: Side.Black | PieceType.Straddler,\n    u: Side.Black | PieceType.Immobilizer,\n\n    K: Side.White | PieceType.King,\n    Q: Side.White | PieceType.Retractor,\n    B: Side.White | PieceType.Chameleon,\n    N: Side.White | PieceType.Springer,\n    R: Side.White | PieceType.Coordinator,\n    P: Side.White | PieceType.Straddler,\n    U: Side.White | PieceType.Immobilizer\n};\n\nconst PieceTypeToFENChar: { [t: number]: string } = {\n    [PieceType.King]: \"k\",\n    [PieceType.Retractor]: \"q\",\n    [PieceType.Chameleon]: \"b\",\n    [PieceType.Springer]: \"n\",\n    [PieceType.Coordinator]: \"r\",\n    [PieceType.Straddler]: \"p\",\n    [PieceType.Immobilizer]: \"u\"\n};\n\nexport function getFENCharFromPieceType(p: PieceType): string {\n    return PieceTypeToFENChar[p]!;\n}\n\nexport function getPieceFromFENChar(char: string): Piece {\n    return FENCharToPiece[char]!;\n}\n\nexport function getSANCharFromPieceType(p: PieceType): string {\n    return PieceStrings[p]!;\n}\n"]}